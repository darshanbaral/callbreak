(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(44)},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(8),s=a(6),r=a(0),l=a.n(r),i=a(19),o=a.n(i),c=a(7),h=a(26);class p extends l.a.Component{constructor(...e){super(...e),this.handleClick=(()=>{this.props.onClick()})}render(){let e=this.props.allowClick?"pointer":"initial";return l.a.createElement(h.a,{style:{cursor:e,width:"100px"},variant:this.props.allowClick?this.props.type:"secondary",onClick:this.handleClick},this.props.label)}}var m=a(25);class u extends l.a.Component{constructor(...e){super(...e),this.state={value:"",placeholder:"0",isValid:!0},this.handleChange=(e=>{const t="call"===this.props.gameState?[1,8]:[0,13],a=Object(n.a)(t,2),s=a[0],r=a[1],l=Number(e.target.value);l<s||l>r||isNaN(l)||!Number.isInteger(l)?this.setState({isValid:!1}):this.setState({isValid:!0}),this.setState({value:e.target.value}),this.props.onChange(this.props.id,e.target.value)}),this.handleBlur=(()=>{this.setState({placeholder:"0"})}),this.handleFocus=(()=>{this.setState({placeholder:"",value:""})})}render(){return l.a.createElement(m.a.Control,{style:{textAlign:"center",border:"1px solid #007bff",fontWeight:"400",height:"100%",fontFamily:"'Roboto Mono', monospace",fontSize:"1.1em"},id:this.props.id,type:"tel",placeholder:this.state.placeholder,value:this.state.value,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,isInvalid:!this.state.isValid})}}function d(){const e=Object(s.a)(["\n  text-align: center;\n  outline: none;\n  border: none;\n  width: calc(100% - 10px);\n  padding: 5px;\n  height: 30px;\n  font-size: 1em;\n  font-weight: 700;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    cursor: ",";\n  }\n"]);return d=function(){return e},e}const g=c.a.input(d(),e=>e.editing?"black":"#2962ff",e=>e.editing?"#286cc440":"white",e=>e.editing?"initial":"pointer");class f extends l.a.Component{constructor(...e){super(...e),this.state={value:this.props.name,editing:!1},this.handleChange=(e=>{this.setState({value:e.target.value},()=>{this.props.onChange(this.props.id,this.state.value)})}),this.handleFocus=(e=>{e.target.select(),this.setState({editing:!0})}),this.handleBlur=(e=>{this.setState({editing:!1})})}render(){return l.a.createElement(g,{"data-tip":!0,"data-for":"change-name-message",onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,value:this.state.value,placeholder:this.props.id,editing:this.state.editing,title:"Click to edit"})}}const b={border:"1px solid",display:"flex",alignItems:"center",justifyContent:"center"};class y extends l.a.Component{constructor(...e){super(...e),this.onChange=((e,t)=>{this.props.onChange(e,t)})}render(){let e=[];for(let t=0;t<4;t++)e.push(l.a.createElement("div",{style:b},l.a.createElement(f,{id:["p1-name","p2-name","p3-name","p4-name"][t],name:this.props.playerNames[t],onChange:this.onChange})));return l.a.createElement(r.Fragment,null,l.a.createElement("div",{style:b},l.a.createElement("strong",null,"Game")),e)}}function C(){const e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px;\n  height: 30px;\n  border: solid 1px black;\n"]);return C=function(){return e},e}const E=c.a.div(C());class w extends l.a.Component{render(){let e=this.props.processedScores.reduce((e,t)=>t.map((t,a)=>Math.round(10*(Number(e[a]||0)+Number(t)))/10),[]);0===e.length&&(e=[0,0,0,0]);let t=[];for(let a=0;a<4;a++)t.push(l.a.createElement(E,{key:this.props.processedScores.length+" "+a,className:"grid-element"},l.a.createElement("strong",null,e[a])));return l.a.createElement(r.Fragment,null,l.a.createElement(E,{className:"grid-element"},l.a.createElement("strong",{title:"This row shows the running total"},"Total")),t)}}function x(){const e=Object(s.a)(["\n      background-color: ",";\n      color: ",";\n      font-style: ",";\n      text-align: center;\n      height: 30px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    "]);return x=function(){return e},e}function v(){const e=Object(s.a)(["\n  font-size: 1em;\n  font-weight: 400;\n  padding-left: 2px;\n  padding-right: 2px;\n  color: ",";\n  border-radius: ",";\n"]);return v=function(){return e},e}function S(){const e=Object(s.a)(["\n  margin-right: 0.6em;\n  font-size: 0.9em;\n  text-decoration: line-through;\n  font-style: italic;\n  color: #e6ee9c;\n"]);return S=function(){return e},e}const k=c.a.span(S()),N=c.a.span(v(),e=>e.negative?"#ff7070":"inherit",e=>e.negative?"2px":"inherit");class I extends l.a.Component{render(){let e=this.props.gameNumber,t=[],a=[],n="#1976d2",s="white",i="none",o=[];this.props.processedScores[e]?(t=this.props.processedScores[e],o=this.props.processedScores[e].map(e=>e<0),a=this.props.calls[e]):(t=this.props.calls[e],a=["","","",""],n="#bbdefb",s="black",i="italic");const h=c.a.div(x(),n,s,i);let p=[];for(let r=0;r<t.length;r++)p.push(l.a.createElement(h,{key:s+e+"p"+r},l.a.createElement(k,null,a[r]),l.a.createElement(N,{negative:o[r]},t[r])));return l.a.createElement(r.Fragment,null,l.a.createElement(h,null,["i","ii","iii","iv","Final"][this.props.gameNumber]),p)}}var O=a(12),R=a.n(O),j=a(13);class F extends l.a.Component{render(){return l.a.createElement(j.b,null,l.a.createElement(j.a,null,l.a.createElement("meta",{charSet:"utf-8"}),l.a.createElement("title",null,"Callbreak"),l.a.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:"./images/apple-touch-icon.png"}),l.a.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"./images/favicon-32x32.png"}),l.a.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"./images/favicon-16x16.png"}),l.a.createElement("link",{rel:"manifest",href:"./images/site.webmanifest"})))}}class M extends l.a.Component{render(){return l.a.createElement("div",{className:this.props.showOverlay?"d-flex":"d-none",style:{justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh",position:"fixed",bottom:"0",left:"0",backgroundColor:"#000000b5"}},l.a.createElement("div",{className:"border border-danger bg-light rounded p-3",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"200px",width:"270px"}},l.a.createElement("h5",{className:"text-center mb-4"},"Do you want to start a new game?"),l.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},l.a.createElement(p,{label:"Yes, I'm sure",allowClick:!0,onClick:this.props.yesFunction,type:"warning"}),l.a.createElement(p,{label:"No, go back",allowClick:!0,onClick:this.props.noFunction,type:"success"}))))}}class z extends l.a.Component{render(){return l.a.createElement("footer",{style:{height:this.props.height,textAlign:"center"},className:"border-top border-primary pt-2"},"\xa9 2019 ",l.a.createElement("a",{href:"https://www.darshanbaral.com"},"Darshan")," \xb7 Fork"," ",l.a.createElement("a",{href:"https://github.com/darshanbaral/callbreak",target:"_blank",rel:"noopener noreferrer"},"here"))}}function B(){return l.a.createElement("span",{style:{width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center"}},l.a.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"35px",height:"35px",viewBox:"0 0 1280.000000 1258.000000",preserveAspectRatio:"xMidYMid meet"},l.a.createElement("metadata",null,"Created by potrace 1.15, written by Peter Selinger 2001-2017"),l.a.createElement("g",{transform:"translate(0.000000,1258.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},l.a.createElement("path",{d:"M6295 12570 c-132 -29 -174 -56 -454 -290 -1331 -1112 -2746 -2473\r\n-3717 -3575 -570 -647 -1039 -1259 -1346 -1756 -299 -484 -587 -1087 -667\r\n-1399 -17 -63 -47 -203 -68 -310 l-38 -195 1 -255 c2 -260 3 -272 54 -533 36\r\n-186 121 -422 228 -632 148 -292 365 -567 617 -781 557 -475 1319 -780 2225\r\n-889 276 -34 746 -31 1050 6 100 12 360 58 372 65 4 3 8 2 8 -3 -1 -13 -273\r\n-226 -660 -518 -485 -366 -584 -453 -702 -619 -129 -181 -156 -332 -94 -515\r\n34 -98 63 -144 133 -214 67 -67 186 -131 273 -147 37 -7 1045 -9 2920 -8\r\nl2865 3 59 23 c115 43 216 119 276 207 67 99 105 254 90 373 -28 221 -223 451\r\n-660 774 -63 46 -187 138 -275 203 -215 159 -552 432 -543 441 2 1 41 -6 88\r\n-16 401 -87 953 -104 1425 -44 407 52 883 179 1245 334 914 390 1507 1038\r\n1721 1883 50 197 58 252 71 477 10 189 10 233 -6 370 -46 419 -182 843 -421\r\n1315 -359 707 -956 1533 -1754 2430 -971 1090 -2331 2396 -3633 3486 -273 229\r\n-308 254 -397 287 -73 26 -217 38 -286 22z"}))))}a(42),a(43);function D(){const e=Object(s.a)(["\n  border-radius: 5px;\n  display: ",";\n"]);return D=function(){return e},e}function V(){const e=Object(s.a)(["\n  min-width: 50px;\n"]);return V=function(){return e},e}a.d(t,"default",function(){return H});const A=c.a.div(V()),P=c.a.div(D(),e=>e.show?"block":"none");class H extends l.a.Component{constructor(...e){super(...e),this.state={round:0,ongoingRound:1,roundComplete:!1,gameNumber:0,gameState:"call",label:"Record Calls",playerNames:["p1","p2","p3","p4"],p1:0,p2:0,p3:0,p4:0,allowClick:!0,errorInInput:!1,errorMessages:[],warningMessages:"",showOverlay:!1},this.rounds={p1:[],p2:[],p3:[],p4:[]},this.playerCalls=[],this.playerScores=[],this.processedScores=[],this.gameCount=5,this.order=["p1","p2","p3","p4"],this.newRound=(()=>{this.setState({ongoingRound:this.state.roundComplete?this.state.ongoingRound+1:this.state.ongoingRound,round:this.state.round+1,roundComplete:!1,gameNumber:0,gameState:"call",label:"Record Calls",p1:0,p2:0,p3:0,p4:0,allowClick:!0,errorMessages:[],errorInInput:!1,showOverlay:!1}),this.playerCalls=[],this.playerScores=[],this.processedScores=[]}),this.isValid=(e=>{let t="call"===this.state.gameState?[1,8,32]:[0,13,13],a=Object(n.a)(t,3),s=a[0],r=a[1],l=a[2],i="call"===this.state.gameState?"calls":"hands",o=["each input for "+i+" must be an integer.","each input for "+i+" must be greater than than "+s+".","each input for "+i+" must be smaller than "+r+".","call"===this.state.gameState?"total of calls must be smaller than "+l+".":"total of hands must be equal to 13."],c=[],h=[];return c.push(e.some(e=>!Number.isInteger(e))),c.push(e.some(e=>e<s)),c.push(e.some(e=>e>r)),"call"===this.state.gameState?c.push(e.reduce((e,t)=>e+t,0)>l):c.push(e.reduce((e,t)=>e+t,0)!==l),c.forEach((e,t)=>{e&&h.push(o[t])}),this.setState({errorMessages:h}),!c.some(e=>e)}),this.processScores=((e,t)=>{e=e.map(e=>Number(e)),t=t.map(e=>Number(e));let a=[];for(let n=0;n<e.length;n++)e[n]>=t[n]?a[n]=t[n]+"."+(e[n]-t[n]):a[n]=-1*t[n];return a}),this.handleScoreInput=(e=>{if(this.isValid(e)){if(e.some(e=>e>=8)){let t=this.playerCalls[this.playerCalls.length-1];[(t=t.map(e=>Number(e))).findIndex(e=>e>=8)].includes(e.findIndex(e=>e>=8))&&console.log("here")}this.setState({gameNumber:this.state.gameNumber+1,errorInInput:!1});let t=this.processScores(e,this.playerCalls[this.playerCalls.length-1]);if(this.playerScores.push(e),this.processedScores.push(t),this.state.gameNumber<this.gameCount-1)this.setState({label:"Record Calls"});else{this.setState({label:"Round Over!!!",roundComplete:!0,allowClick:!1}),this.processedScores.reduce((e,t)=>t.map((t,a)=>Math.round(10*(Number(e[a]||0)+Number(t)))/10),[]).map((e,t)=>this.rounds[this.order[t]].push(e))}this.setState({gameState:"call"})}else this.setState({errorInInput:!0})}),this.onPlayerNameChange=((e,t)=>{let a=this.state.playerNames;a[["p1-name","p2-name","p3-name","p4-name"].findIndex(t=>t===e)]=t,this.setState({playerNames:a}),a.some(e=>""===e|void 0===e)?this.setState({warningMessages:"Player name(s) empty"}):this.setState({warningMessages:""})}),this.handleCallInput=(e=>{this.isValid(e)?(this.setState({gameState:"play",label:"Record Hands",errorInInput:!1}),this.playerCalls.push(e)):this.setState({errorInInput:!0})}),this.handleClick=(()=>{if("Round Over!!!"===this.state.label)return;const e=this.state,t=[e.p1,e.p2,e.p3,e.p4].map(e=>Number(e));"call"===this.state.gameState?this.handleCallInput(t):this.handleScoreInput(t)}),this.handleChange=((e,t)=>{this.setState({[e]:t})}),this.toggleDisplay=(()=>{0===this.state.gameNumber&&"call"===this.state.gameState||!this.state.allowClick?this.newRound():this.setState({showOverlay:!this.state.showOverlay})})}render(){let e=[];for(let n=0;n<this.playerCalls.length;n++)e.push(l.a.createElement(I,{key:R.a.v4(),gameNumber:n,calls:this.playerCalls,processedScores:this.processedScores}));let t=[];this.order.forEach(e=>{t.push(l.a.createElement(A,null,l.a.createElement(u,{id:e,gameState:this.state.gameState,onChange:this.handleChange})))});let a=[];for(let n=0;n<this.state.errorMessages.length;n++)a.push(l.a.createElement("li",{key:R.a.v4()},this.state.errorMessages[n]));return l.a.createElement("div",{className:"App container mt-2"},l.a.createElement(F,null),l.a.createElement(M,{showOverlay:this.state.showOverlay,yesFunction:this.newRound,noFunction:this.toggleDisplay}),l.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},l.a.createElement("h1",{className:"mb-2 mr-2"},"Call Break"),l.a.createElement(B,null)),l.a.createElement("div",{style:{minHeight:"calc(100vh - 120px)"}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},className:"border-bottom border-primary pb-3 mb-3"},l.a.createElement(p,{label:this.state.label,allowClick:this.state.allowClick,onClick:this.handleClick,type:"primary"}),l.a.createElement(p,{label:"New Round",allowClick:!0,onClick:this.toggleDisplay,type:"warning"})),l.a.createElement("div",{className:"grid-container"},l.a.createElement(y,{playerNames:this.state.playerNames,onChange:this.onPlayerNameChange}),l.a.createElement(r.Fragment,{key:"Round"+this.state.round},l.a.createElement("div",{className:"bg-success text-white p-1",title:"Enter calls and hands in this row",style:{textAlign:"center",lineHeight:"15px",fontSize:"0.9em"}},"Ongoing"," ",l.a.createElement("span",{style:{fontSize:"0.7em"}},"(",l.a.createElement("i",null,"Round ",this.state.ongoingRound),")")),t),e,l.a.createElement(w,{processedScores:this.processedScores})),"",l.a.createElement(P,{style:{backgroundColor:"#ff000033"},show:this.state.errorInInput,className:"border border-danger mt-4 p-2"},l.a.createElement("h4",null,"Error. The input is not valid."),l.a.createElement("ul",null,a)),l.a.createElement(P,{style:{backgroundColor:"#fff20033"},show:this.state.warningMessages,className:"border border-warning mt-4 p-2"},l.a.createElement("h4",null,"Warning"),l.a.createElement("ul",null,l.a.createElement("li",null,this.state.warningMessages)))),l.a.createElement(z,{height:"60px"}))}}const T=document.getElementById("root");o.a.render(l.a.createElement(H,null),T)}},[[29,1,2]]]);
//# sourceMappingURL=main.14dce548.chunk.js.map