(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){e.exports=n(50)},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(24),r=n(13),l=n(6),s=n(7),o=n(9),i=n(8),c=n(10),u=n(11),p=n(0),h=n.n(p),m=n(25),d=n.n(m),g=n(12),f=n(32),b=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){n.props.onClick()},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.allowClick?"pointer":"initial";return h.a.createElement(f.a,{style:{cursor:e,width:"100px"},variant:this.props.allowClick?this.props.type:"secondary",onClick:this.handleClick},this.props.label)}}]),t}(h.a.Component),y=n(31),v=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={value:"",placeholder:"0",isValid:!0},n.handleChange=function(e){var t="call"===n.props.gameState?[1,8]:[0,13],a=Object(r.a)(t,2),l=a[0],s=a[1],o=Number(e.target.value);o<l||o>s||isNaN(o)||!Number.isInteger(o)?n.setState({isValid:!1}):n.setState({isValid:!0}),n.setState({value:e.target.value}),n.props.onChange(n.props.id,e.target.value)},n.handleBlur=function(){n.setState({placeholder:"0"})},n.handleFocus=function(){n.setState({placeholder:"",value:""})},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return h.a.createElement(y.a.Control,{style:{textAlign:"center",border:"1px solid #007bff",fontWeight:"700"},id:this.props.id,type:"tel",placeholder:this.state.placeholder,value:this.state.value,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,isInvalid:!this.state.isValid})}}]),t}(h.a.Component);function C(){var e=Object(u.a)(["\n  text-align: center;\n  outline: none;\n  border: none;\n  width: calc(100% - 10px);\n  padding: 5px;\n  height: 30px;\n  font-size: 1em;\n  font-weight: 700;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    cursor: ",";\n  }\n"]);return C=function(){return e},e}var E=g.a.input(C(),function(e){return e.editing?"black":"#2962ff"},function(e){return e.editing?"#286cc440":"white"},function(e){return e.editing?"initial":"pointer"}),O=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={value:n.props.name,editing:!1},n.handleChange=function(e){n.setState({value:e.target.value},function(){n.props.onChange(n.props.id,n.state.value)})},n.handleFocus=function(e){e.target.select(),n.setState({editing:!0})},n.handleBlur=function(e){n.setState({editing:!1})},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return h.a.createElement(E,{"data-tip":!0,"data-for":"change-name-message",onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,value:this.state.value,placeholder:this.props.id,editing:this.state.editing,title:"Click to edit"})}}]),t}(h.a.Component);function w(){var e=Object(u.a)(["\n  border: 1px solid;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return w=function(){return e},e}var j=g.a.div(w()),k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e,t){n.props.onChange(e,t)},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return h.a.createElement(p.Fragment,null,h.a.createElement(j,{width:"100"},h.a.createElement("strong",null,"Game")),h.a.createElement(j,null,h.a.createElement(O,{id:"p1-name",name:this.props.playerNames[0],onChange:this.onChange})),h.a.createElement(j,null,h.a.createElement(O,{id:"p2-name",name:this.props.playerNames[1],onChange:this.onChange})),h.a.createElement(j,null,h.a.createElement(O,{id:"p3-name",name:this.props.playerNames[2],onChange:this.onChange})),h.a.createElement(j,null,h.a.createElement(O,{id:"p4-name",name:this.props.playerNames[3],onChange:this.onChange})))}}]),t}(h.a.Component);function S(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px;\n  height: 30px;\n  border: solid 1px black;\n"]);return S=function(){return e},e}var N=g.a.div(S()),x=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.processedScores.reduce(function(e,t){return t.map(function(t,n){return Math.round(10*(Number(e[n]||0)+Number(t)))/10})},[]);0===e.length&&(e=[0,0,0,0]);for(var t=[],n=0;n<4;n++)t.push(h.a.createElement(N,{key:this.props.processedScores.length+" "+n,className:"grid-element"},h.a.createElement("strong",null,e[n])));return h.a.createElement(p.Fragment,null,h.a.createElement(N,{className:"grid-element"},h.a.createElement("strong",{title:"This row shows the running total"},"Total")),t)}}]),t}(h.a.Component);function I(){var e=Object(u.a)(["\n      background-color: ",";\n      color: ",";\n      font-style: ",";\n      text-align: center;\n    "]);return I=function(){return e},e}function R(){var e=Object(u.a)(["\n  font-size: 1em;\n  font-weight: 400;\n  padding-left: 2px;\n  padding-right: 2px;\n  color: ",";\n  border-radius: ",";\n"]);return R=function(){return e},e}function F(){var e=Object(u.a)(["\n  margin-right: 0.6em;\n  font-size: 0.9em;\n  text-decoration: line-through;\n  font-style: italic;\n  color: #e6ee9c;\n"]);return F=function(){return e},e}var M=g.a.span(F()),A=g.a.span(R(),function(e){return e.negative?"#ff7070":"inherit"},function(e){return e.negative?"2px":"inherit"}),B=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.gameNumber,t=[],n=[],a="#1976d2",r="white",l="none",s=[];this.props.processedScores[e]?(t=this.props.processedScores[e],s=this.props.processedScores[e].map(function(e){return e<0}),n=this.props.calls[e]):(t=this.props.calls[e],n=["","","",""],a="#bbdefb",r="black",l="italic");for(var o=g.a.div(I(),a,r,l),i=[],c=0;c<t.length;c++)i.push(h.a.createElement(o,{key:r+e+"p"+c},h.a.createElement(M,null,n[c]),h.a.createElement(A,{negative:s[c]},t[c])));return h.a.createElement(p.Fragment,null,h.a.createElement(o,null,["i","ii","iii","iv","Final"][this.props.gameNumber]),i)}}]),t}(h.a.Component),z=n(17),V=n.n(z),D=n(18),H=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return h.a.createElement(D.b,null,h.a.createElement(D.a,null,h.a.createElement("meta",{charSet:"utf-8"}),h.a.createElement("title",null,"Callbreak"),h.a.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:"./images/apple-touch-icon.png"}),h.a.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"./images/favicon-32x32.png"}),h.a.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"./images/favicon-16x16.png"}),h.a.createElement("link",{rel:"manifest",href:"./images/site.webmanifest"})))}}]),t}(h.a.Component),P=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return h.a.createElement("div",{className:this.props.showOverlay?"d-flex":"d-none",style:{justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh",position:"fixed",bottom:"0",left:"0",backgroundColor:"#000000b5"}},h.a.createElement("div",{className:"border border-danger bg-light rounded p-3",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"200px",width:"270px"}},h.a.createElement("h5",{className:"text-center mb-4"},"Do you want to start a new game?"),h.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},h.a.createElement(b,{label:"Yes, I'm sure",allowClick:!0,onClick:this.props.yesFunction,type:"warning"}),h.a.createElement(b,{label:"No, go back",allowClick:!0,onClick:this.props.noFunction,type:"success"}))))}}]),t}(h.a.Component),T=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return h.a.createElement("footer",{style:{height:this.props.height,textAlign:"center"}},"\xa9 2019 ",h.a.createElement("a",{href:"https://www.darshanbaral.com"},"Darshan")," \xb7 Fork"," ",h.a.createElement("a",{href:"https://github.com/darshanbaral/callbreak",target:"_blank",rel:"noopener noreferrer"},"here"))}}]),t}(h.a.Component);n(48),n(49);function J(){var e=Object(u.a)(["\n  border-radius: 5px;\n  display: ",";\n"]);return J=function(){return e},e}function W(){var e=Object(u.a)(["\n  min-width: 50px;\n"]);return W=function(){return e},e}n.d(t,"default",function(){return Y});var q=g.a.div(W()),G=g.a.div(J(),function(e){return e.show?"block":"none"}),Y=function(e){function t(){var e,n;Object(l.a)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={round:0,ongoingRound:1,roundComplete:!1,gameNumber:0,gameState:"call",label:"Record Calls",playerNames:["p1","p2","p3","p4"],p1:0,p2:0,p3:0,p4:0,allowClick:!0,errorInInput:!1,errorMessages:[],warningMessages:"",showOverlay:!1},n.rounds={p1:[],p2:[],p3:[],p4:[]},n.playerCalls=[],n.playerScores=[],n.processedScores=[],n.gameCount=5,n.order=["p1","p2","p3","p4"],n.newRound=function(){n.setState({ongoingRound:n.state.roundComplete?n.state.ongoingRound+1:n.state.ongoingRound,round:n.state.round+1,roundComplete:!1,gameNumber:0,gameState:"call",label:"Record Calls",p1:0,p2:0,p3:0,p4:0,allowClick:!0,errorMessages:[],errorInInput:!1,showOverlay:!1}),n.playerCalls=[],n.playerScores=[],n.processedScores=[]},n.isValid=function(e){var t="call"===n.state.gameState?[1,8,32]:[0,13,13],a=Object(r.a)(t,3),l=a[0],s=a[1],o=a[2],i="call"===n.state.gameState?"calls":"hands",c=["each input for "+i+" must be an integer.","each input for "+i+" must be greater than than "+l+".","each input for "+i+" must be smaller than "+s+".","call"===n.state.gameState?"total of calls must be smaller than "+o+".":"total of hands must be equal to 13."],u=[],p=[];return u.push(e.some(function(e){return!Number.isInteger(e)})),u.push(e.some(function(e){return e<l})),u.push(e.some(function(e){return e>s})),"call"===n.state.gameState?u.push(e.reduce(function(e,t){return e+t},0)>o):u.push(e.reduce(function(e,t){return e+t},0)!==o),u.forEach(function(e,t){e&&p.push(c[t])}),n.setState({errorMessages:p}),!u.some(function(e){return e})},n.processScores=function(e,t){e=e.map(function(e){return Number(e)}),t=t.map(function(e){return Number(e)});for(var n=[],a=0;a<e.length;a++)e[a]>=t[a]?n[a]=t[a]+"."+(e[a]-t[a]):n[a]=-1*t[a];return n},n.handleScoreInput=function(e){if(n.isValid(e)){if(e.some(function(e){return e>=8})){var t=n.playerCalls[n.playerCalls.length-1];[(t=t.map(function(e){return Number(e)})).findIndex(function(e){return e>=8})].includes(e.findIndex(function(e){return e>=8}))&&console.log("here")}n.setState({gameNumber:n.state.gameNumber+1,errorInInput:!1});var a=n.processScores(e,n.playerCalls[n.playerCalls.length-1]);if(n.playerScores.push(e),n.processedScores.push(a),n.state.gameNumber<n.gameCount-1)n.setState({label:"Record Calls"});else n.setState({label:"Round Over!!!",roundComplete:!0,allowClick:!1}),n.processedScores.reduce(function(e,t){return t.map(function(t,n){return Math.round(10*(Number(e[n]||0)+Number(t)))/10})},[]).map(function(e,t){return n.rounds[n.order[t]].push(e)});n.setState({gameState:"call"})}else n.setState({errorInInput:!0})},n.onPlayerNameChange=function(e,t){var a=["p1-name","p2-name","p3-name","p4-name"].findIndex(function(t){return t===e});if(""===t|void 0===t)n.setState({warningMessages:"Player name(s) empty"});else{var r=n.state.playerNames;r[a]=t,n.setState({playerNames:r,warningMessages:""})}},n.handleCallInput=function(e){n.isValid(e)?(n.setState({gameState:"play",label:"Record Hands",errorInInput:!1}),n.playerCalls.push(e)):n.setState({errorInInput:!0})},n.handleClick=function(){if("Round Over!!!"!==n.state.label){var e=n.state,t=[e.p1,e.p2,e.p3,e.p4].map(function(e){return Number(e)});"call"===n.state.gameState?n.handleCallInput(t):n.handleScoreInput(t)}},n.handleChange=function(e,t){n.setState(Object(a.a)({},e,t))},n.toggleDisplay=function(){0===n.state.gameNumber&&"call"===n.state.gameState||!n.state.allowClick?n.newRound():n.setState({showOverlay:!n.state.showOverlay})},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){for(var e=this,t=[],n=0;n<this.playerCalls.length;n++)t.push(h.a.createElement(B,{key:V.a.v4(),gameNumber:n,calls:this.playerCalls,processedScores:this.processedScores}));var a=[];this.order.forEach(function(t){a.push(h.a.createElement(q,null,h.a.createElement(v,{id:t,gameState:e.state.gameState,onChange:e.handleChange})))});for(var r=[],l=0;l<this.state.errorMessages.length;l++)r.push(h.a.createElement("li",{key:V.a.v4()},this.state.errorMessages[l]));return h.a.createElement("div",{className:"App container mt-2"},h.a.createElement(H,null),h.a.createElement(P,{showOverlay:this.state.showOverlay,yesFunction:this.newRound,noFunction:this.toggleDisplay}),h.a.createElement("h1",{className:"mb-2"},"Call Break ",h.a.createElement("sup",null,"\u2660")),h.a.createElement("div",{style:{minHeight:"calc(100vh - 120px)"}},h.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},h.a.createElement(b,{label:this.state.label,allowClick:this.state.allowClick,onClick:this.handleClick,type:"primary"}),h.a.createElement(b,{label:"New Round",allowClick:!0,onClick:this.toggleDisplay,type:"warning"})),h.a.createElement("hr",null),h.a.createElement("div",{className:"grid-container"},h.a.createElement(k,{playerNames:this.state.playerNames,onChange:this.onPlayerNameChange}),h.a.createElement(p.Fragment,{key:"Round"+this.state.round},h.a.createElement("div",{className:"bg-success text-white",title:"Enter calls and hands in this row",style:{textAlign:"center",lineHeight:"18px"}},"Ongoing"," ",h.a.createElement("span",{style:{fontSize:"0.7em"}},"(",h.a.createElement("i",null,"Round ",this.state.ongoingRound),")")),a),t,h.a.createElement(x,{processedScores:this.processedScores})),"",h.a.createElement(G,{style:{backgroundColor:"#ff000033"},show:this.state.errorInInput,className:"border border-danger mt-4 p-2"},h.a.createElement("h4",null,"Error. The input is not valid."),h.a.createElement("ul",null,r)),h.a.createElement(G,{style:{backgroundColor:"#fff20033"},show:this.state.warningMessages,className:"border border-warning mt-4 p-2"},h.a.createElement("h4",null,"Warning"),h.a.createElement("ul",null,h.a.createElement("li",null,this.state.warningMessages)))),h.a.createElement(T,{height:"60px"}))}}]),t}(h.a.Component),_=document.getElementById("root");d.a.render(h.a.createElement(Y,null),_)}},[[35,1,2]]]);
//# sourceMappingURL=main.bd3bda6b.chunk.js.map